<div class="card m-lg-3 m-md-1 ml-lg-5 mr-lg-5 ml-md-5 mr-md-5 ">
  <div class="card-header card-primary">
    <h4>Checkout</h4>
  </div>
  <div class="card-block">
    <div class="row mt-4">
      <div class="col-lg-1 col-md-1 col-sm-12 col-xs-12">
      </div>
      <div class="col-lg-10 col-md-10 col-sm-12 col-xs-12">
        <div class="row" *ngIf="error">
          <div class="col-12">
            <div class="alert alert-danger"><i class="fa fa-warning"></i> {{error}}</div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
            <div class="card card-document card-document-primary">
              <div class="card-header">
                <h5>Transaction Details</h5>
              </div>
              <div class="card-block">
                <p><strong>Plan :</strong> {{plan.description}} <a class="hidden-sm-up" href="#plandetails"> Details</a></p>
                <p><strong>Price :</strong> <span class="price">{{plan.price}}</span></p>
              </div>
            </div>
            <div class="card card-document card-document-peace">
              <div class="card-header">
                <h5>Payment Details</h5>
              </div>
              <div class="card-block">
                <div class="mt-2">
                  <ngb-tabset>
                    <ngb-tab title="Saved Cards" *ngIf="creditcards?.length > 0">
                      <ng-template ngbTabContent>
                        <h6 class="mt-3"> Click to select the card</h6>
                        <div class="row mt-2 form-group">
                          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt-2" *ngFor="let card of creditcards;let i = index">
                              <div class="card card-document card-document-primary payments-summary" [ngClass]="{'selected': card.id == selectedCard?.id}" (click)="selectCard(card)">
                                <div class="card-header text-center">
                                  <img class="credit-card-logo-header" src="assets/images/{{card.brand.toLowerCase()}}.png"/>
                                </div>
                                <div class="card-block">
                                    <div class="row">
                                      <div class="col-12">
                                        <strong>Number :</strong> ***{{card.last4}}
                                      </div>
                                    </div>
                                    <div class="row">
                                      <div class="col-12">
                                        <strong>Expires :</strong> {{card.exp_month}}/{{card.exp_year}}
                                      </div>
                                    </div>
                                </div>
                              </div>
                          </div>
                        </div>
                        <p><i class="fa fa-exclamation"></i> By Clicking <strong>Purchase Plan</strong>, you agree to the <a routerLink="/terms"> Terms and Conditions</a>.</p>
                        <div class="form-group text-right mt-3">
                            <button type="button" class="btn btn-primary" (click)="chargeBySavedCard()" [disabled]="!selectedCard?.id"><i *ngIf="isPaymentProgress" class="fa fa-spinner fa-spin"></i>  Purchase Plan </button>
                        </div>
                      </ng-template>
                    </ngb-tab>
                    <ngb-tab title="New Card">
                      <ng-template ngbTabContent>
                        <div class="mt-2">
                          <stripepayment actionLabel="Purchase Plan" (tokenReceived)="chargeByNewCard($event)" (invalidCard)="handleError(plan)"></stripepayment>
                        </div>
                      </ng-template>
                    </ngb-tab>
                  </ngb-tabset>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
            <div id="plandetails" class="card card-document card-document-secondary">
              <div class="card-header">
                <h5>Plan Details</h5>
              </div>
              <div class="card-block" [ngSwitch]="plan?.id">
                <basicplan [showActions]="false" *ngSwitchCase="'0'"></basicplan>
                <standardplan [showActions]="false" *ngSwitchCase="'1'"></standardplan>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
